<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Fabric for Minecraft 1.20.3 &amp; 1.20.4 | Fabric</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Fabric for Minecraft 1.20.3 &amp; 1.20.4" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="It’s only been two months since we published the last article on Minecraft updates, but here we are. Minecraft 1.20.3 is to be released in the near future with some changes affecting mod makers." />
<meta property="og:description" content="It’s only been two months since we published the last article on Minecraft updates, but here we are. Minecraft 1.20.3 is to be released in the near future with some changes affecting mod makers." />
<link rel="canonical" href="https://fabricmc.net/2023/11/30/1203.html" />
<meta property="og:url" content="https://fabricmc.net/2023/11/30/1203.html" />
<meta property="og:site_name" content="Fabric" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-11-30T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Fabric for Minecraft 1.20.3 &amp; 1.20.4" />
<script type="application/ld+json">
{"headline":"Fabric for Minecraft 1.20.3 &amp; 1.20.4","dateModified":"2023-11-30T00:00:00+00:00","datePublished":"2023-11-30T00:00:00+00:00","description":"It’s only been two months since we published the last article on Minecraft updates, but here we are. Minecraft 1.20.3 is to be released in the near future with some changes affecting mod makers.","url":"https://fabricmc.net/2023/11/30/1203.html","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://fabricmc.net/2023/11/30/1203.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <link rel="stylesheet" href="/assets/main.css?v=1750355267">
  <link rel="stylesheet" media="(prefers-color-scheme: dark)" href="/assets/dark.css?v=1750355267"><link type="application/atom+xml" rel="alternate" href="https://fabricmc.net/feed.xml" title="Fabric" /><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon.png">
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><div class="site-header-logo">
      <a class="site-title" rel="author" href="/"><img src="/assets/logo.png" style="image-rendering: pixelated;" width="52" height="56" alt="charset"></img> Fabric</a>
    </div><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
              <a class="page-link" href="/use/installer/">
                Download
              </a>
            
          
            
              <a class="page-link" href="/blog/">
                Blog
              </a>
            
          
            
              <a class="page-link" href="/develop/">
                Develop
              </a>
            
          
            
              <a class="page-link" href="/discuss/">
                Discuss
              </a>
            
          
            
              <a class="page-link" href="https://docs.fabricmc.net/">
                Docs
              </a>
            
          
            
              <a class="page-link" href="https://fabricmc.net/wiki/">
                Wiki
              </a>
            
          
        </div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Fabric for Minecraft 1.20.3 &amp; 1.20.4</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2023-11-30T00:00:00+00:00" itemprop="datePublished">Nov 30, 2023
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>It’s only been two months since we published the last article on Minecraft updates, but here we are. Minecraft 1.20.3 is to be released in the near future with some changes affecting mod makers.</p>

<p>As usual, we ask players to be patient, and give mod developers time to update to this new version. Given the rather short interval between updates, some authors may choose to have a rest and skip some versions; we ask everyone kindly not to pester them.</p>

<p>Here is a list of all major modder-facing changes in this version. Note that all code references are using Yarn mappings; modders using alternative mappings may need to use different names.</p>

<h2 id="fabric-changes">Fabric changes</h2>
<p>Fabric is about to celebrate its 5th birthday on December 10th! As we approach this milestone, we’re thrilled to share that our team is actively working on introducing exciting new features and enhancements. The following sections outline some of these advancements.</p>

<p>Developers should use Loom 1.4 (at the time of writing) to develop mods for Minecraft 1.20.3. Players should install the latest stable version of Fabric Loader (currently 0.14.25), or the 0.15 beta if feeling adventurous (see below).</p>

<h3 id="loader-015">Loader 0.15</h3>
<p>Fabric Loader 0.15 has been released recently, which features built-in support for LlamaLad7’s <a href="https://github.com/LlamaLad7/MixinExtras">MixinExtras</a> library. This version is currently in beta. Should you discover compatibility issues with mods that already bundle MixinExtras, please <a href="https://github.com/FabricMC/fabric-loader/issues">file a bug report</a>.</p>

<p>MixinExtras is a companion library to Mixin, providing <a href="https://github.com/LlamaLad7/MixinExtras/wiki">new annotations</a> to write your mixins in more expressive and compatible ways. It also features an easier way of specifying local captures. Due to its usefulness, MixinExtras is currently being Jar-in-Jar’d by a large amount of mods, increasing modpack sizes. With Fabric Loader bundling it now, all mods can use the library without needing to worry about distribution.</p>

<p>Please note that Fabric Loader 0.15 went through a number of internal changes, notably the transition from <a href="https://github.com/FabricMC/tiny-mappings-parser">TMP</a> to <a href="https://github.com/FabricMC/mapping-io">Mapping-IO</a> and improvements to the lazy mapping loading, which reduce memory consumption. These changes do not affect most users, but mods that depend on unsupported, internal code might break with this update.</p>

<h3 id="loom-14">Loom 1.4</h3>
<p>Loom 1.4 includes enhancement for decompilers, support for deprecated modules in <code class="language-plaintext highlighter-rouge">fabricApi.module</code> (which allows dependencies on individual Fabric API modules), and many more bug fixes and performance improvements. Loom 1.4 requires Gradle 8.3 or later.</p>

<p>Loom now includes built-in support for the Vineflower decompiler. It’s a fork of Fernflower, but with drastically improved output quality compared to the original. CFR remains the default decompiler for the time being. To decompile with Vineflower, use <code class="language-plaintext highlighter-rouge">genSourcesWithVineflower</code> instead of <code class="language-plaintext highlighter-rouge">genSources</code>.</p>

<p>A new DSL has been introduced to make configuring data generation with best practices easier. This DSL automatically creates a run configuration and optional source set for data generation while also excluding the cache from the built JAR:</p>

<div class="language-gradle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fabricApi</span> <span class="o">{</span>
    <span class="n">configureDataGeneration</span><span class="o">()</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="new-fabric-api-changes">New Fabric API changes</h3>
<p>With the help of many contributors, Fabric API has received some new features since the last update blog post:</p>

<ul>
  <li>Data Generation: add a method to register custom keys with priorities (ErrorCraft) <!-- added after the blogpost, before 1.20.2 release --></li>
  <li>Loot API: add <code class="language-plaintext highlighter-rouge">LootTableEvents.LOADED</code> (LLytho)</li>
</ul>

<p>In addition to those new features, this update also contains performance improvements for <code class="language-plaintext highlighter-rouge">PacketType</code>-based networking. It now skips the serialization entirely in singleplayer, and the packet is now serialized on the network thread, not the main thread. Thanks to deirn for making these improvements!</p>

<h3 id="breaking-changes-in-1203">Breaking changes in 1.20.3</h3>
<p><code class="language-plaintext highlighter-rouge">BlockSetTypeRegistry</code> and <code class="language-plaintext highlighter-rouge">WoodTypeRegistry</code> of the Object Builder API, previously deprecated, were removed. Please use the builders provided in the same API.</p>

<p>The following APIs in the Transfer API module, all previously deprecated, were removed.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ContainerItemContext#withInitial</code></li>
  <li><code class="language-plaintext highlighter-rouge">Storage#simulateInsert</code>, <code class="language-plaintext highlighter-rouge">simulateExtract</code>, <code class="language-plaintext highlighter-rouge">exactView</code></li>
</ul>

<h2 id="minecraft-changes">Minecraft changes</h2>
<p>Minecraft 1.20.3 introduces some breaking changes to major developer-facing APIs.</p>

<h3 id="block-codecs">Block codecs</h3>
<p>Mojang now uses codecs to serialize blocks - specifically, instances of a particular type of block. You might need to implement the <code class="language-plaintext highlighter-rouge">getCodec</code> method in your <code class="language-plaintext highlighter-rouge">Block</code>s.</p>

<p>However, the block codecs are <strong>currently unused</strong>. This means that you can return <code class="language-plaintext highlighter-rouge">null</code> or throw <code class="language-plaintext highlighter-rouge">UnsupportedOperationException</code> in <code class="language-plaintext highlighter-rouge">getCodec</code> method.</p>

<p>That being said, it is still recommended to familiarize yourself with using codecs, to future-proof your code and prevent potential porting pains in the future.</p>

<h3 id="text">Text</h3>
<p><code class="language-plaintext highlighter-rouge">Text</code> also got a codec, and now is serialized using it (including when interacting with Gson). Over the network the text is now sent as an NBT.</p>

<ul>
  <li>Important change: <strong><code class="language-plaintext highlighter-rouge">Text#translatable</code> now expects all arguments to be numbers, boolean, strings, or other <code class="language-plaintext highlighter-rouge">Text</code>s.</strong> To pass things like <code class="language-plaintext highlighter-rouge">BlockPos</code> or <code class="language-plaintext highlighter-rouge">Identifier</code>, which were previously implicitly converted to strings, use <code class="language-plaintext highlighter-rouge">stringifiedTranslatable</code>.</li>
  <li>For those who have previously used <code class="language-plaintext highlighter-rouge">Codecs.TEXT</code> or <code class="language-plaintext highlighter-rouge">STRINGIFIED_TEXT</code>, it’s time to switch to <code class="language-plaintext highlighter-rouge">TextCodecs.CODEC</code> or <code class="language-plaintext highlighter-rouge">TextCodecs.STRINGIFIED_CODEC</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">Text.Serializer</code> inner class was split into <code class="language-plaintext highlighter-rouge">Serializer</code> (to use as a Gson adapter) and <code class="language-plaintext highlighter-rouge">Serialization</code> (contains static methods). The methods were also renamed; <code class="language-plaintext highlighter-rouge">toJson</code> is now <code class="language-plaintext highlighter-rouge">toJsonString</code> to clarify return value.</li>
  <li><code class="language-plaintext highlighter-rouge">Style.Serializer</code> is gone; it is now <code class="language-plaintext highlighter-rouge">Style.Codecs</code> and holds the codec only.</li>
  <li>In related news, <code class="language-plaintext highlighter-rouge">PacketByteBuf#readUnlimitedText</code> was added; this reads an infinite amount of text with no size limit. Most S2C packets now use this.</li>
</ul>

<h3 id="ticks">Ticks</h3>
<p>The <code class="language-plaintext highlighter-rouge">/tick</code> command from the Carpet mod arrived in the vanilla game. This change affects both the server and the client. To support this functionality in your mod:</p>

<ul>
  <li>Use <code class="language-plaintext highlighter-rouge">getTickManager().shouldTick()</code> to check if things should tick in your <code class="language-plaintext highlighter-rouge">START_WORLD_TICK</code>/<code class="language-plaintext highlighter-rouge">END_WORLD_TICK</code>/<code class="language-plaintext highlighter-rouge">START_SERVER_TICK</code>/<code class="language-plaintext highlighter-rouge">END_SERVER_TICK</code> event.</li>
  <li><code class="language-plaintext highlighter-rouge">TickManager</code> can be obtained from <code class="language-plaintext highlighter-rouge">MinecraftServer#getTickManager</code> or <code class="language-plaintext highlighter-rouge">World#getTickManager</code> (works with <code class="language-plaintext highlighter-rouge">ClientWorld</code> as well).</li>
  <li>Use <code class="language-plaintext highlighter-rouge">shouldSkipTick</code> for checking if an entity should be ticked (beware, it is the inverse of <code class="language-plaintext highlighter-rouge">shouldTick</code>).</li>
  <li>Note: <strong>You do not need to call these checks inside <code class="language-plaintext highlighter-rouge">Entity</code>/<code class="language-plaintext highlighter-rouge">BlockEntity</code> tick methods or events.</strong> Only call inside server/world tick events.</li>
</ul>

<p>It is also now possible for the game to run faster or slower than 50 MSPT intentionally (as opposed to through lag). Call <code class="language-plaintext highlighter-rouge">TickManager#getMillisPerTick()</code> to determine the intended MSPT.</p>

<h3 id="blocks">Blocks</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">AbstractBlock#randomTick</code> no longer calls <code class="language-plaintext highlighter-rouge">scheduledTick</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">BlockSetType</code> received new fields specifying pressure plate activation conditions and button interactions with projectiles/Breezes.</li>
  <li><code class="language-plaintext highlighter-rouge">ColoredFallingBlock</code> was added, replacing <code class="language-plaintext highlighter-rouge">GravelBlock</code> and <code class="language-plaintext highlighter-rouge">SandBlock</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">PowderSnowCauldronBlock</code> was removed; <code class="language-plaintext highlighter-rouge">LeveledCauldronBlock</code> handles the logic now.</li>
  <li><code class="language-plaintext highlighter-rouge">TransparentBlock</code> was split into <code class="language-plaintext highlighter-rouge">TranslucentBlock</code>, which renders in a translucent way (like slime and ice blocks), and <code class="language-plaintext highlighter-rouge">TransparentBlock</code>, which extends <code class="language-plaintext highlighter-rouge">TranslucentBlock</code> and is used by grates and glass blocks. <code class="language-plaintext highlighter-rouge">AbstractGlassBlock</code> and <code class="language-plaintext highlighter-rouge">GlassBlock</code> were removed.</li>
  <li><code class="language-plaintext highlighter-rouge">FernBlock</code> is renamed to <code class="language-plaintext highlighter-rouge">ShortPlantBlock</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">SaplingGenerator</code> is now in <code class="language-plaintext highlighter-rouge">block</code> package, and individual generator classes were removed and replaced with fields.</li>
  <li><code class="language-plaintext highlighter-rouge">AbstractBlock#onStateReplaced</code> implementations for block entities were consolidated to <code class="language-plaintext highlighter-rouge">ItemScatterer#onStateReplaced</code>. Make sure to call <code class="language-plaintext highlighter-rouge">super</code> AFTER calling <code class="language-plaintext highlighter-rouge">ItemScatterer</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">LootableContainerBlockEntity</code> logics were split into <code class="language-plaintext highlighter-rouge">LootableInventory</code>. <code class="language-plaintext highlighter-rouge">checkLootInteraction</code> was renamed to <code class="language-plaintext highlighter-rouge">generateLoot</code>. <code class="language-plaintext highlighter-rouge">LootableContainerBlockEntity</code> still implements <code class="language-plaintext highlighter-rouge">LootableInventory</code>, but this allows other block entities like decorated pots to share the logic.</li>
</ul>

<h3 id="entities">Entities</h3>
<ul>
  <li>Boats, minecarts, and other player-constructed vehicles should now extend <code class="language-plaintext highlighter-rouge">VehicleEntity</code>. This provides the wobble effect seen when hitting that entity.</li>
  <li>Various non-living entities (including projectiles and TNT) received <code class="language-plaintext highlighter-rouge">copyFrom</code> override to copy the owner.</li>
  <li><code class="language-plaintext highlighter-rouge">PersistentProjectileEntity</code> and its subclasses now take the <code class="language-plaintext highlighter-rouge">ItemStack</code> in the constructor, representing the item stack form that players can pick up. <code class="language-plaintext highlighter-rouge">getItemStack</code> returns the stack as-is, while <code class="language-plaintext highlighter-rouge">asItemStack</code> returns a copy (potentially reflecting the changes like potion override).</li>
  <li><code class="language-plaintext highlighter-rouge">SpawnReason</code> got two methods: <code class="language-plaintext highlighter-rouge">isAnySpawner</code> (spawner &amp; trial spawner) and <code class="language-plaintext highlighter-rouge">isTrialSpawner</code>. <code class="language-plaintext highlighter-rouge">canSpawn</code> methods should check <code class="language-plaintext highlighter-rouge">isAnySpawner</code>, and make the entity exempt from biome/height requirements imposed for natural spawn.</li>
</ul>

<h3 id="client">Client</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">PopupScreen</code> was added. This screen, unlike other screens, renders on top of an existing screen. The popup can include a message, an image, and buttons (such as “Open Link”). To create an instance, use <code class="language-plaintext highlighter-rouge">Builder</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">CheckboxWidget</code> is now built using a builder.</li>
  <li><code class="language-plaintext highlighter-rouge">EntryListWidget</code> no longer takes the bottom coordinate in the constructor. It also actually became a <code class="language-plaintext highlighter-rouge">Widget</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">ClickableWidget#render</code> was made <code class="language-plaintext highlighter-rouge">final</code> to prevent overrides of that method from not calling <code class="language-plaintext highlighter-rouge">super.render</code> and preventing the tooltip from rendering. Subclasses must override <code class="language-plaintext highlighter-rouge">renderWidget</code> instead.</li>
</ul>

<h3 id="misc">Misc</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">CommandManager#execute</code> methods no longer return an integer return value. To get the return value, use <code class="language-plaintext highlighter-rouge">ServerCommandSource#withReturnValueConsumer</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">RecipeProvider</code> methods received some changes. Some JSON builders and <code class="language-plaintext highlighter-rouge">generateCookingRecipes</code> now require passing the constructor of recipe class, like <code class="language-plaintext highlighter-rouge">CampfireCookingRecipe::new</code>. Other builders no longer require the serializer.</li>
  <li><code class="language-plaintext highlighter-rouge">EntityType#HEROBRINE</code> was removed. (Wait, was this ever added in the first place?)</li>
</ul>

  </div><a class="u-url" href="/2023/11/30/1203.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <p>
      The contents of this website, unless otherwise indicated, are licensed under a <a rel="license"
        href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike
        4.0 International License</a>.
    </p>

    <p style="font-size: 10px;">
      NOT AN OFFICIAL MINECRAFT PRODUCT. NOT APPROVED BY OR ASSOCIATED WITH MOJANG.
    </p>

  </div>

</footer></body>

</html>
